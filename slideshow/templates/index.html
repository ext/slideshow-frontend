<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"
	xmlns:py="http://genshi.edgewall.org/" py:strip="">

	<py:match path="head" once="true">
	<head py:attrs="select('@*')">
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<link rel="stylesheet" href="/static/css/slideshow.min.css" type="text/css" media="screen" />
		<link rel="stylesheet" href="/static/css/jquery-ui-1.11.4.css" type="text/css" media="screen" />
		<script src="/static/js/libs.min.js" type="text/javascript"></script>
		<script src="/static/js/jquery-ui-1.11.4.min.js" type="text/javascript"></script>
		<script src="/static/js/jquery.jeditable.js" type="text/javascript"></script>
		<script src="/static/js/jquery-foldable-1.0.js" type="text/javascript"></script>
		<script src="/static/js/slideshow.min.js" type="text/javascript"></script>

		<title py:with="title = list(select('title/text()'))">Slideshow<py:if test="title"> &gt; ${title}</py:if></title>
		${select('*[local-name()!="title"]')}
	</head>
	</py:match>

	<?python
		from slideshow.settings import Settings

		class Menu:
			def __init__(self, *items):
				self.items = items

			def attrs_li(self, i):
				c = [self.items[i][0]]
				if self.items[i][0] == parent:
					c.append('active')
				return {'class': ' '.join(c)}

		menu = Menu(
			('main', _('main'), '/'),
			('slides', _('slides'), '/slides/upload'),
			('queues', _('queues'), '/queue'),
			('maintenance', _('maintenance'), '/maintenance'))
	?>

	<py:match path="body" once="true">
	<body py:attrs="select('@*')">
		<div id="header">
			<h1>${Settings()['Slideshow.Title']}</h1>
		</div>

		<div id="bar">
			<span class="daemonstatus">Status: <strong>${daemonstr}</strong></span>

			<nav id="menu">
				<ul class="nav nav-tabs">
					<py:for each="(i, (_, title, url)) in enumerate(menu.items)">
					<li py:attrs="menu.attrs_li(i)" role="presentation">
						<a href="${url}"><i></i> ${title}</a>
					</li>
					</py:for>
				</ul>
			</nav>
		</div>

		<div id="content">
			${select('*|text()')}
		</div>

		<div id="footer">
			<p py:if="username is not None">Logged in as ${username} (<a href="/logout">logout</a>)</p>
			<p>Powered by <a href="http://ext.github.com/slideshow">Slideshow 0.4.1</a></p>
		</div>

	</body>
	</py:match>

</html>
