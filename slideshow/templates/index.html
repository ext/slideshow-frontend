<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"
	xmlns:py="http://genshi.edgewall.org/" py:strip="">

	<py:match path="head" once="true">
	<head py:attrs="select('@*')">
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link rel="stylesheet" href="/static/css/slideshow.min.css" type="text/css" media="screen" />
		<link rel="stylesheet" href="/static/css/jquery-ui-1.11.4.css" type="text/css" media="screen" />
		<script src="/static/js/libs.min.js" type="text/javascript"></script>
		<script src="/static/js/jquery-ui-1.11.4.min.js" type="text/javascript"></script>
		<script src="/static/js/jquery.jeditable.js" type="text/javascript"></script>
		<script src="/static/js/slideshow.min.js" type="text/javascript"></script>
		<title py:with="title = list(select('title/text()'))">Slideshow<py:if test="title"> &gt; ${title}</py:if></title>
		${select('*[local-name()!="title"]')}
	</head>
	</py:match>

	<?python
		from slideshow.settings import Settings

		class Menu:
			def __init__(self, *items):
				self.items = items

			def attrs_li(self, i):
				c = [self.items[i][0]]
				if self.items[i][0] == parent:
					c.append('active')
				return {'class': ' '.join(c)}

		menu = Menu(
			('main', _('Main'), '/'),
			('slides', _('Slides'), '/slides/upload'),
			('queues', _('Queues'), '/queue'),
			('maintenance', _('Maintenance'), '/maintenance'))
	?>

	<py:match path="body" once="true">
		<body py:attrs="select('@*')">
			<header>
				<nav class="navbar navbar-default">
					<div class="container-fluid">
						<div class="navbar-header">
							<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
								<span class="sr-only">Toggle navigation</span>
								<span class="icon-bar"></span>
								<span class="icon-bar"></span>
								<span class="icon-bar"></span>
							</button>
							<a class="navbar-brand" href="/">${Settings()['Slideshow.Title']}</a>
						</div>

						<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
							<ul id="menu" class="nav navbar-nav">
								<py:for each="(i, (_, title, url)) in enumerate(menu.items)">
									<li py:attrs="menu.attrs_li(i)" role="presentation">
										<a href="${url}"><i></i> ${title}</a>
									</li>
								</py:for>
							</ul>

							<p class="navbar-text navbar-right daemonstatus">Status: <strong>${daemonstr}</strong></p>
						</div>
					</div>
				</nav>
			</header>

			<div id="content">
				${select('*|text()')}
			</div>

			<footer>
				<p py:if="username is not None">Logged in as ${username} (<a href="/logout">logout</a>)</p>
				<p>Powered by <a href="http://ext.github.com/slideshow">Slideshow 0.4.1</a></p>
			</footer>
		</body>
	</py:match>
</html>
